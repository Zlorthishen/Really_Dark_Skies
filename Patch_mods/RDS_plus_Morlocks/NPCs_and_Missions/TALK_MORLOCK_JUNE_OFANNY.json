[
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MORLOCK_JUNE_OFANNY_ROOT",
    "type": "talk_topic",
    "dynamic_line": [ "Thank you for opening the door.  I was trapped in here!" ],
    "responses": [
      {
        "text": "Lets set a combat strategy…",
        "condition": {
          "and": [
            { "npc_has_var": "temporal_follower", "type": "general", "context": "maquis", "value": "yes" },
            { "not": { "u_has_var": "u_saved_June_OFanny", "type": "general", "context": "maquis", "value": "yes" } }
          ]
        },
        "topic": "TALK_COMBAT_COMMANDS"
      },
      {
        "text": "Stay here until I come back.",
        "condition": {
          "and": [
            { "npc_has_var": "temporal_follower", "type": "general", "context": "maquis", "value": "yes" },
            { "u_has_mission": "DKZ_MORLOCK_RETURN_TO_SEWER_CENTRAL" },
            { "not": { "u_has_var": "u_saved_June_OFanny", "type": "general", "context": "maquis", "value": "yes" } }
          ]
        },
        "topic": "TALK_MORLOCK_JUNE_OFANNY_STAY_PUT"
      },
      {
        "text": "Come with me.",
        "condition": {
          "and": [
            { "npc_has_var": "temporal_follower", "type": "general", "context": "maquis", "value": "yes"  },
            { "u_has_mission": "DKZ_MORLOCK_RETURN_TO_SEWER_CENTRAL" },
            { "not": { "u_has_var": "u_saved_June_OFanny", "type": "general", "context": "maquis", "value": "yes" } }
          ]
        },
        "topic": "TALK_MORLOCK_JUNE_OFANNY_FOLLOW"
      },
      {
        "text": "[MISSION] I'm here to rescue you",
        "condition": {
          "and": [
            { "u_has_mission": "DKZ_MORLOCK_RESCUE_JUNE_OFANNY" },
            { "not": { "u_has_var": "u_saved_June_OFanny", "type": "general", "context": "maquis", "value": "yes" } }
          ]
        },
        "topic": "TALK_MORLOCK_JUNE_OFANNY_RESCUE"
      },
      {
        "text": "[MISSION] You are saved!",
        "condition": {
          "and": [
            { "not": { "u_has_mission": "DKZ_MORLOCK_RESCUE_JUNE_OFANNY" } },
            { "u_has_var": "u_saved_June_OFanny", "type": "general", "context": "maquis", "value": "yes" }
          ]
        },
        "effect": [ { "npc_first_topic": "TALK_MORLOCK_JUNE_OFANNY_RESCUED" } ],
        "opinion": { "trust": 5, "value": 4 },
        "topic": "TALK_MORLOCK_JUNE_OFANNY_ESCORT_DONE"
      },
      { "text": "About that mission…", "topic": "TALK_MISSION_INQUIRE", "condition": "has_assigned_mission" },
      {
        "text": "Alright, lets get going.",
        "condition": {
          "and": [
            { "not": { "u_has_mission": "DKZ_MORLOCK_RESCUE_JUNE_OFANNY" } },
            { "not": { "u_has_var": "u_saved_June_OFanny", "type": "general", "context": "maquis", "value": "yes" } }
          ]
        },
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MORLOCK_JUNE_OFANNY_RESCUED",
    "type": "talk_topic",
    "dynamic_line": [ "Thanks for the rescue.  Be sure to expand this story line at some point!" ],
    "responses": [ { "text": "I'll expect a ping on discord.", "topic": "TALK_DONE" } ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MORLOCK_JUNE_OFANNY_STAY_PUT",
    "type": "talk_topic",
    "dynamic_line": [ "Please come back!" ],
    "responses": [ { "text": "Stay here.", "effect": [ "stop_following" ], "topic": "TALK_DONE" } ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MORLOCK_JUNE_OFANNY_FOLLOW",
    "type": "talk_topic",
    "dynamic_line": [ "Alright I'm following you." ],
    "responses": [ { "text": "Lets get going.", "effect": [ "follow_only" ], "topic": "TALK_DONE" } ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MORLOCK_JUNE_OFANNY_RESCUE",
    "type": "talk_topic",
    "dynamic_line": [
      "I want to get back down to the safety of the sewer, but I'm not any use in a fight.  Please make sure the way down to the basement is clear."
    ],
    "responses": [
      { "text": "Alright, I will go and clear the way and be back soon.", "topic": "TALK_DONE" },
      {
        "text": "The way is clear, lets go.",
        "opinion": { "trust": 2, "value": 5 },
        "effect": [
          "follow_only",
          { "add_mission": "DKZ_MORLOCK_RETURN_TO_SEWER_CENTRAL" },
          { "npc_add_var": "temporal_follower", "type": "general", "context": "maquis", "value": "yes" }
        ],
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "//": "-----------------------------------------------------------------------------------------------------------------------",
    "id": "TALK_MORLOCK_JUNE_OFANNY_ESCORT_DONE",
    "type": "talk_topic",
    "dynamic_line": [ "I never thought I would be glad to be living in the sewers!" ],
    "responses": [
      {
        "text": "You said it.",
        "effect": [ { "npc_lose_var": "temporal_follower", "type": "general", "context": "maquis" }, "stop_following" ],
        "topic": "TALK_DONE"
      }
    ]
  }
]
